namespace = nda_historic # Series of Historic 'Colour' events around spiritlism and the Occult - show to source country and to NEN as colour
# use cooldown to stop refires to reduce variable bloat

nda_historic.1838 = { # 2nd Great Awakening - based on base Vic2 version
	type = country_event
	placement = p:x01D042
	title = nda_historic.1838.t
	desc = nda_historic.1838.d
	flavor = nda_historic.1838.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = { 		
		game_date >= 1838.4.1 
		game_date < 1839 

		# owner of Syracuse, NY. or NEN
		OR = {
			p:x01D042 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	
	
	immediate = {
		debug_log = "Great Awakening"
		debug_log_scopes = yes		
	}

	option = { #"Any more pending?"
		name = nda_historic.1838.a
		default_option = yes	
	}
}

nda_historic.1848 = { # Founding of Spiritualist Movement
	type = country_event
	placement = p:x01D042
	title =nda_historic.1848.t
	desc =nda_historic.1848.d
	flavor = nda_historic.1848.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1848 spiritulist movement founded in Up State New York 
		game_date >= 1848.4.1 
		game_date < 1849 

		# owner of Syracuse, NY. or NEN
		OR = {
			p:x01D042 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}	
	}

	cooldown = { months = 24 }	
	
	immediate = {
		debug_log = "Founding of Spiritualist Movement : [THIS.GetCountry.GetNameNoFormatting]" 
		# give them a boost, both religion and pops
		p:x01D042 = {
			state = {
				if = {
					limit = { NOT = { has_variable = nda_rel_boost_spiritulism }}
					debug_log = "Founding of Spiritualist Movement - add pop" 
					convert_population = { target = rel:nda_rel_spiritulism value = 0.05 }	
					
					set_variable = { # ongoing conversion
						name = nda_rel_boost_spiritulism
						months = 12
						value = nda_small_conversion
					}

					every_neighbouring_state = {
						set_variable = { # # ongoing conversion of neighbours
							name = nda_rel_boost_spiritulism
							months = 12
							value = nda_small_conversion
						}					
					}							
				}
			} 				
		}
	}

	option = { #"Hope it does not spread"
		name =nda_historic.1848.a
		default_option = yes	
	}
}

nda_historic.1849 = { # Death of Poe in Baltimore
	type = country_event
	placement = p:x0E3435
	title = nda_historic.1849.t
	desc = nda_historic.1849.d
	flavor =  nda_historic.1849.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds" 

	trigger = {
 		# 1849 I
		game_date >= 1849.10.1 
		game_date < 1850 

		# owner of Baltimore. or NEN
		OR = {
			p:x0E3435 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	
	
	option = { #"Nevermore"
		name = nda_historic.1849.a
		default_option = yes
	}
}

nda_historic.1852 = { # An American Medium in London
	type = country_event
	placement = p:x7543C8 
	title = nda_historic.1852.t
	desc = nda_historic.1852.d
	flavor =  nda_historic.1852.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1852 Mrs Hayden visits London 
		game_date >= 1852 
		game_date < 1853

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}	
	}

	cooldown = { months = 24 }
	
	immediate = {
		debug_log = "American Medium in London : [THIS.GetCountry.GetNameNoFormatting]" 
		p:x7543C8 = {
			state = {
				if = {
					limit = { NOT = { has_variable = nda_rel_boost_spiritulism }}
					debug_log = "American Medium in London : [THIS.GetCountry.GetNameNoFormatting]" 
					convert_population = { target = rel:nda_rel_spiritulism value = 0.05 }	
					
					set_variable = { # ongoing conversion
						name = nda_rel_boost_spiritulism
						months = 12
						value = nda_small_conversion
					}

					every_neighbouring_state = {
						set_variable = { # # ongoing conversion of neighbours
							name = nda_rel_boost_spiritulism
							months = 12
							value = nda_small_conversion
						}					
					}				
				
				}

			} 				
		}
	}

	option = { 
		name = nda_historic.1852.a
		default_option = yes

	}
}

nda_historic.1857 = { # Banner of Light
	type = country_event
	placement = p:x211ECF 
	title = nda_historic.1857.t
	desc = nda_historic.1857.d
	flavor =  nda_historic.1857.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1857 1st published Boston 
		game_date >= 1857.4 
		game_date < 1858

		# owner of Boston. or NEN
		OR = {
			p:x211ECF = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}	
	}

	cooldown = { months = 24 }	
	
	immediate = {
		debug_log = "Banner of Light : [THIS.GetCountry.GetNameNoFormatting]" 
		p:x211ECF = {
			state = {
				if = {
					limit = { NOT = { has_variable = nda_rel_boost_spiritulism }}					
					debug_log = "Banner of Light - add pop" 
					set_variable = { # ongoing conversion
						name = nda_rel_boost_spiritulism
						months = 12
						value = nda_small_conversion
					}

					every_neighbouring_state = {
						set_variable = { # # ongoing conversion of neighbours
							name = nda_rel_boost_spiritulism
							months = 12
							value = nda_trivial_conversion
						}					
					}				
				
				}

			} 				
		}
	}

	option = { 
		name = nda_historic.1857.a
		default_option = yes

	}
}


nda_historic.1862 = { # The Ghost Club
	type = country_event
	placement = p:x7543C8 
	title = nda_historic.1862.t
	desc = nda_historic.1862.d
	flavor =  nda_historic.1862.f

	duration = 3

	gui_window = event_window_1char_tabloid

	left_icon = scope:character_to_display

	#event_image = {
	#	video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	#}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1862 Ghost Club London 
		game_date >= 1862 
		game_date < 1863

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	

	immediate = {
		p:x7543C8 = { # London
			state = { save_scope_as = spiritulist_state 
				# add Dickens to country
				owner = {
					create_character = { # based on ecchi_gbr_dickens_character_template
						first_name = Charles
						last_name = ecchi_Dickens
						culture = cu:british
						female = no
						religion = protestant
						ideology = ideology_reformer
						interest_group = ig_intelligentsia
						dna = ecchi_dna_charles_dickens
						birth_date = 1812.2.7
						traits = { inspirational_orator }
						#interest_group_leader_usage = {
						#	country_trigger = {
						#		exists = c:GBR
						#		this = c:GBR
						#	}
						#	interest_group_trigger = {
						#		is_interest_group_type = ig_intelligentsia
						#	}
						#	earliest_usage_date = 1836.1.1
						#	latest_usage_date = 1870.6.9
						#	chance = 90
						#}
						on_created = {
							set_variable = is_dickens
							
						}
					}

					random_scope_character = {
							limit = { has_variable = is_dickens } #use the variable to scope to that specific character
							save_scope_as = character_to_display #save the scope here
					}
				}
			}
		}
	}	
	
	option = { 
		name = nda_historic.1862.a
		default_option = yes

	}
}

nda_historic.1865 = { # Zetetic Astronomy - Earth is not a globe! TODO
	type = country_event
	placement = p:x7543C8 
	title = nda_historic.1865.t
	desc = nda_historic.1865.d
	flavor =  nda_historic.1865.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
		game_date >= 1865.6 
		game_date < 1866

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }
	
	option = { 
		name = nda_historic.1865.a
		default_option = yes
	}

	option = { 
		name = nda_historic.1865.b
	}

	option = { 
		name = nda_historic.1865.c
	}
}

nda_historic.1875 = { # The Theosophical Society
	type = country_event
	placement = p:xE217B5 
	title = nda_historic.1875.t
	desc = nda_historic.1875.d
	flavor =  nda_historic.1875.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1875 Theosophical Society founded in New York 
		game_date >= 1875.4.1 
		game_date < 1876 

		# owner of NY. or NEN
		OR = {
			p:xE217B5 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }

	immediate = {
		p:xE217B5 = {
			state = {
				if = {
					limit = { NOT = { has_variable = nda_rel_boost_theosophic }}
					convert_population = { target = rel:nda_rel_theosophic value = nda_medium_conversion }	
					
					set_variable = { # ongoing conversion
						name = nda_rel_boost_theosophic
						months = 12
						value = nda_small_conversion
					}

					every_neighbouring_state = {
						set_variable = { # # ongoing conversion of neighbours
							name = nda_rel_boost_theosophic
							months = 12
							value = nda_small_conversion
						}					
					}
				}
			} 				
		}
	}

	option = { #"Hope it does not spread"
		name = nda_historic.1875.a
		default_option = yes
	}
}

#1879 - Theosophical Society moves to Madras!
nda_historic.1879 = {
	type = country_event
	placement = p:x07104C # Madras 
	title = nda_historic.1879.t
	desc = nda_historic.1879.d
	flavor =  nda_historic.1879.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1879 Theosophical Society moves to India
		game_date >= 1879.4.1 
		game_date < 1880 

		# owner of Madras. or NEN
		OR = {
			p:x07104C = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	

	immediate = {
		p:x07104C = {
			state = {
				if = {
					# do limited conversion unlike NY
					limit = { NOT = { has_variable = nda_rel_boost_theosophic }}
					#convert_population = { target = rel:nda_rel_theosophic value = 0.05 }	
					
					set_variable = { # ongoing conversion
						name = nda_rel_boost_theosophic
						months = 12
						value = nda_small_conversion
					}
				}
			} 				
		}
	}

	option = { #"Hope it does not spread"
		name = nda_historic.1879.a
		default_option = yes
	}
}

nda_historic.1882 = { # The Society for Psychical Research
	type = country_event
	placement = p:x7543C8 
	title = nda_historic.1882.t
	desc = nda_historic.1882.d
	flavor =  nda_historic.1882.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1882 Society for Psychical Research founded 
		game_date >= 1882 
		game_date < 1883

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	
	
	option = { 
		name = nda_historic.1882.a
		default_option = yes
	}
}

nda_historic.1887 = { # "The Secret Doctrine" - actually 1888
	type = country_event
	placement = p:xE217B5
	title = nda_historic.1887.t
	desc = nda_historic.1887.d
	flavor =  nda_historic.1887.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1888 book published - presume new york
		game_date >= 1888.8.1 
		game_date < 1889 

		# owner of NY. or NEN
		OR = {
			p:xE217B5 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	

	immediate = {
		p:xE217B5 = {
			state = {
				if = {
					limit = { NOT = { has_variable = nda_rel_boost_theosophic }}
					convert_population = { target = rel:nda_rel_theosophic value = 0.05 }	
					
					set_variable = { # ongoing conversion
						name = nda_rel_boost_theosophic
						months = 12
						value = nda_small_conversion
					}

					every_neighbouring_state = {
						set_variable = { # # ongoing conversion of neighbours
							name = nda_rel_boost_theosophic
							months = 12
							value = nda_small_conversion
						}					
					}
				}
			} 				
		}		
	}

	option = { #"Hope it does not spread"
		name = nda_historic.1887.a
		default_option = yes
	}
}

nda_historic.1888 = { # Fox's come clean - Spiritualist Movement
	type = country_event
	placement = p:x01D042
	title = nda_historic.1888.t
	desc = nda_historic.1888.d
	flavor =  nda_historic.1888.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1888 spiritulist movement discredited 
		game_date >= 1888.4.1 
		game_date < 1889 

		# owner of Syracuse, NY. or NEN
		OR = {
			p:x01D042 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		} 
	}

	cooldown = { months = 24 }	
	
	option = { 
		name = nda_historic.1888.a
		default_option = yes		
	}
}

nda_historic.1889 = { # Hermetic Order of the Golden Dawn - actually 1888
	type = country_event
	placement = p:x7543C8
	title = nda_historic.1889.t
	desc = nda_historic.1889.d
	flavor =  nda_historic.1889.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
 		# 1888 Isis-Urania Temple - London
		game_date >= 1888.10.1 
		game_date < 1889 

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	
	
	option = { 
		name = nda_historic.1889.a
		default_option = yes
	}
}

nda_historic.1892 = { # Zetetic Astronomy - Universal Zetetic
	type = country_event
	placement = p:x7543C8
	title = nda_historic.1892.t
	desc = nda_historic.1892.d
	flavor =  nda_historic.1892.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_london_center.bk2"
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/europenorthamerica/london_center"

	icon = "gfx/interface/icons/event_icons/event_newspaper.dds" # book

	trigger = {
		game_date >= 1893.6 
		game_date < 1894

		# owner of London. or NEN
		OR = {
			p:x7543C8 = { state = { owner = ROOT } }
			AND = {
				exists = c:NEN
				c:NEN = ROOT
			}			
		}
	}

	cooldown = { months = 24 }	
	
	option = { 
		name = nda_historic.1892.a
		default_option = yes
	}

	option = { 
		name = nda_historic.1892.b
	}
}