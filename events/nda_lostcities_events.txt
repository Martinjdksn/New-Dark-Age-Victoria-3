namespace = nda_lostcities
# Events to notify of changes to Lost Cities status

nda_lostcities.10 = {  # K'N-Yan revealed ? Do trigger but should be decision for YIG?
	type = country_event
	placement = p:xA07F85 #xEB66DA #
	title = nda_lostcities.10.t
	desc = nda_lostcities.10.d
	flavor =  nda_lostcities.10.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		exists = c:YIG
		c:YIG = THIS
		NOT = { has_global_variable = nda_lostcity_knyan_exists }
		p:xA07F85 = {
			state = {
				owner = c:YIG
				NOT = { has_building = building_nda_lostcity_knyan }
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"

		p:xA07F85 = {
			state = {
				# state level
				create_building={
					building="building_nda_lostcity_knyan" 
					#level=1
					#reserves=1
				}	
				# Notify world
				every_country = {
					post_notification = nda_lostcity_knyan_reveal
				}

				set_global_variable = nda_lostcity_knyan_exists								
			}	
		}
	}	
	
	option = { #
		name = nda_lostcities.10.a 
		default_option = yes	
		debug_log = "City revealed option"

	}
}

nda_lostcities.11 = {  # K'N-Yan hidden ?
	type = country_event
	placement = p:xA07F85 #xEB66DA #
	title = nda_lostcities.11.t
	desc = nda_lostcities.11.d
	flavor =  nda_lostcities.11.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		
		has_global_variable = nda_lostcity_knyan_exists 
		p:xA07F85 = {
			state = {
				owner = { is_cultist_country = no } # Cultists no longer control it
				has_building = building_nda_lostcity_knyan
			}
		}
	}

	immediate = {
		debug_log = "City removal immediate"
		p:xA07F85 = {
			state = {
				# state level
				remove_building = "building_nda_lostcity_knyan" 

				# Notify world
				every_country = {
					post_notification = nda_lostcity_knyan_hidden
				}				
				remove_global_variable = nda_lostcity_knyan_exists	

			}			
		}
	}	
	
	option = { #
		name = nda_lostcities.11.a 
		default_option = yes	
		debug_log = "City hidden again option"

	}
}


nda_lostcities.20 = {  # y'han-thlei revealed ?
	type = country_event
	placement = p:x30C040
	title = nda_lostcities.20.t
	desc = nda_lostcities.20.d
	flavor =  nda_lostcities.20.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		exists = c:DGN
		c:DGN = THIS
		NOT = { has_global_variable = nda_lostcity_yhanthlei_exists }
		p:x30C040 = {
			state = {
				owner = c:DGN
				NOT = { has_building = building_nda_lostcity_yhanthlei }
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"

		p:x30C040 = {
			state = {
				# state level
				create_building={
					building="building_nda_lostcity_yhanthlei" 
					#level=1
					#reserves=1
				}
				
				# Notify world
				every_country = {
					post_notification = nda_lostcity_yhanthlei_reveal
				}

				set_global_variable = nda_lostcity_yhanthlei_exists
			}	
		}


	}	
	
	option = { #
		name = nda_lostcities.20.a 
		default_option = yes	
		debug_log = "City revealed option"

	}
}

nda_lostcities.21 = {  #  y'han-thlei  hidden ?
	type = country_event
	placement = p:x30C040 #xA07F85 #
	title = nda_lostcities.21.t
	desc = nda_lostcities.21.d
	flavor =  nda_lostcities.21.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		
		has_global_variable = nda_lostcity_yhanthlei_exists 
		p:x30C040 = {
			state = {
				owner = { is_cultist_country = no } # Cultists no longer control it
				has_building = building_nda_lostcity_yhanthlei
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"
		p:x30C040 = {
			state = {
				# state level
				remove_building = "building_nda_lostcity_yhanthlei" 	
				
				# Notify world
				every_country = {
					post_notification = nda_lostcity_yhanthlei_hidden
				}

				remove_global_variable = nda_lostcity_yhanthlei_exists	
			}	
		}
	}	
	
	option = { #
		name = nda_lostcities.21.a 
		default_option = yes	
		debug_log = "City hidden again option"

	}
}


nda_lostcities.30 = {  # Shamballa revealed ?
	type = country_event
	placement = p:xB9B797 
	title = nda_lostcities.30.t
	desc = nda_lostcities.30.d
	flavor =  nda_lostcities.30.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		exists = c:LEN
		NOT = { has_global_variable = nda_lostcity_shamballa_exists }
		p:xB9B797 = {
			state = {
				owner = c:LEN
				NOT = { has_building = building_nda_lostcity_shamballa }
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"

		p:xB9B797 = {
			state = {
				# state level
				create_building={
					building="building_nda_lostcity_shamballa" 
					#level=1
					#reserves=1
				}
								
				# Notify world
				every_country = {
					post_notification = nda_lostcity_shamballa_reveal
				}

				set_global_variable = nda_lostcity_shamballa_exists			
			}	
		}
	}	
	
	option = { #
		name = nda_lostcities.30.a 
		default_option = yes	
		debug_log = "City revealed option"

	}
}

nda_lostcities.31 = {  # Shamballa hidden ?
	type = country_event
	placement = p:xB9B797
	title = nda_lostcities.31.t
	desc = nda_lostcities.31.d
	flavor =  nda_lostcities.31.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		
		has_global_variable = nda_lostcity_shamballa_exists 
		p:xB9B797 = {
			state = {
				owner = { is_cultist_country = no } # Cultists no longer control it
				has_building = building_nda_lostcity_shamballa
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"
		p:xB9B797 = {
			state = {
				# state level
				remove_building = "building_nda_lostcity_shamballa" 	
				
				# Notify world
				every_country = {
					post_notification = nda_lostcity_shamballa_hidden
				}

				remove_global_variable = nda_lostcity_shamballa_exists						
			}	
		}

	}	
	
	option = { #
		name = nda_lostcities.31.a 
		default_option = yes	
		debug_log = "City hidden again option"

	}
}

nda_lostcities.40 = {  # Nameless City revealed ?
	type = country_event
	placement = p:x68A578 
	title = nda_lostcities.40.t
	desc = nda_lostcities.40.d
	flavor =  nda_lostcities.40.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"
		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		exists = c:ELD
		c:ELD = THIS
		NOT = { has_global_variable = nda_lostcity_nameless_city_exists }
		p:x68A578 = {
			state = {
				owner = c:ELD
				NOT = { has_building = building_nda_lostcity_nameless_city }
				save_scope_as = nameless_city_state_scope
			}
		}
	}

	immediate = {
		debug_log = "City revealed immediate"

		p:x68A578 = {
			state = {
				# state level
				create_building={
					building="building_nda_lostcity_nameless_city" 
					#level=1
					#reserves=1
				}
								
				# Notify world
				every_country = {
					post_notification = nda_lostcity_nameless_city_reveal
				}

				set_global_variable = nda_lostcity_nameless_city_exists			
			}	
		}
	}	
	
	option = { #
		name = nda_lostcities.40.a 
		default_option = yes	
		debug_log = "City revealed option"

	}
}

nda_lostcities.41 = {  # nameless_city hidden ?
	type = country_event
	placement = p:x68A578
	title = nda_lostcities.41.t
	desc = nda_lostcities.41.d
	flavor =  nda_lostcities.41.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/middleeast_jungle_expedition.bk2"		
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	#on_opened_soundeffect = "event:/SFX/Events/unspecific/leader_speaking_to_a_group_of_people"

	icon = "gfx/interface/icons/event_icons/event_protest.dds"

	trigger = {
		
		has_global_variable = nda_lostcity_nameless_city_exists 
		p:x68A578 = {
			state = {
				owner = { is_cultist_country = no } # Cultists no longer control it
				has_building = building_nda_lostcity_nameless_city
			}
		}
	}

	immediate = {
		debug_log = "City hidden immediate"
		p:x68A578 = {
			state = {
				# state level
				remove_building = "building_nda_lostcity_nameless_city" 	
				
				# Notify world
				every_country = {
					post_notification = nda_lostcity_nameless_city_hidden
				}

				remove_global_variable = nda_lostcity_nameless_city_exists						
			}	
		}

	}	
	
	option = { #
		name = nda_lostcities.41.a 
		default_option = yes	
		debug_log = "City hidden again option"

	}
}
