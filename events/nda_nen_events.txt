namespace = nda_nen

	# Arkham = "x211ECF"
    # Innsmouth = "x13444D"
    # Beverly = "xB040C0"
    # mine = "x8D8744"
    # Dunwich = "xB040C0" 

# Miskatonic Uni - Library and Herbert West - start events at #10

nda_nen.10 = { # Founding of Library
	type = country_event
	placement = scope:university_state
	title = nda_nen.10.t
	desc = nda_nen.10.d
	flavor =  nda_nen.10.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/europenorthamerica_art_gallery.bk2"
		
	}
	#event_image = {  texture = "gfx/event_pictures/event1.dds"  }

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/tutorial_icon.dds" # book

	trigger = {
 		# 1842 and owner of Miskaton - should still be NEN but could be Neighbours
		game_date >= 1842 

		p:x211ECF = { state = { owner = ROOT } }

		exists = c:NEN
		c:NEN = ROOT
		OR = {
			NOT = { has_variable = nda_miskatonic_library_built }	
			NOT = { has_variable = nda_miskatonic_library_unbuilt }		
		}

		has_technology_researched = academia
	}

	immediate = {
		set_global_variable = nda_miskatonic_library

		p:x211ECF = { # Arkham
			save_scope_as = university_state
		}

	}	
	
	option = { #"Accept donations and build Library"
		name = nda_nen.10.a
		default_option = yes
		
		ai_chance = { # should be most likely
			base = 80		
		}

		scope:university_state = {
			# build uni if not existing
			if = {	
				limit = {
					#NOT = {
					#	has_building = building_university
					#}
				}
				create_building={
					building="building_university"
					level=1
					reserves=1
				}
				
			}
			else = {
				# add level to any university??	
				#start_building_construction = building_university
			}
		}
		debug_log = "Build Orne Library"

		set_variable = nda_miskatonic_library_built
	}

	option = { #"Build Statue instead"
		name = nda_nen.10.b

		ai_chance = { # could always do something daft
			base = 20		
		}

		debug_log = "Build Arnold Statue"
		set_variable = nda_miskatonic_library_unbuilt # use to change chrome text later on chain
	}
}

#94140 - Appeal for reinstatement
nda_nen.11 = { # Appeal for reinstatement
	type = country_event
	placement = scope:university_state
	title = nda_nen.11.t
	desc = nda_nen.11.d
	flavor =  nda_nen.11.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_politicians_arguing.bk2"
		
	}
	#event_image = {  texture = "gfx/event_pictures/event1.dds"  }

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_scales.dds" # hammer and gavel

	trigger = {
 		# 1903 and owner of Miskatonic Uni - should still be NEN but could be Neighbours
		game_date >= 1903  

		p:x211ECF = { state = { owner = ROOT has_building = building_university } }

		exists = c:NEN
		c:NEN = ROOT
		has_global_variable = nda_miskatonic_library

		has_technology_researched = academia
	}


	immediate = {
		p:x211ECF = { # Arkham
			save_scope_as = university_state
		}
	}	
	
	option = { #" Of course"
		name = nda_nen.11.a
		default_option = yes

		# main stream herbert
		set_global_variable = herbert_west_approval	

		trigger_event = { id = nda_nen.12 days = 150} # Plague in Arkham
		debug_log = "Herbert West Reinstated"
	}

	option = { #"no we will not"
		name = nda_nen.11.b
		debug_log = "Herbert West Expelled" # End of Story? NO of cource not!

		trigger_event = { id = nda_nen.12 days = 150} # Plague in Arkham
	}

}

#94141 - Plague in Arkham
nda_nen.12 = { # Plague in Arkham
	type = country_event
	placement = scope:university_state
	title = nda_nen.12.t
	desc = nda_nen.12.d
	flavor =  nda_nen.12.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_sick_in_hospital.bk2"
		
	}
	#event_image = {  texture = "gfx/event_pictures/event1.dds"  }

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
 		# from event nda_nen.11 
	}

	immediate = {
		p:x211ECF = { # Arkham
			save_scope_as = university_state
		}
	}	
	
	option = { #"Unfortunate Events"
		name = nda_nen.12.a
		default_option = yes
		# nothing to do as info event	

		debug_log = "Arkham Plague"
	}


}
#94142 - Research breakthrough
nda_nen.13 = { # 
	type = country_event
	placement = scope:university_state
	title = nda_nen.13.t
	desc = nda_nen.13.d
	flavor =  nda_nen.13.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_military_parade.bk2"
		
	}
	#event_image = {  texture = "gfx/event_pictures/event1.dds"  }

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_default.dds"

	trigger = {
		has_global_variable = herbert_west_approval	
		game_date >= 1918  # 

		p:x211ECF = { state = { owner = ROOT has_building = building_university } }
		
		exists = c:NEN
		c:NEN = ROOT
	}

	immediate = {
		p:x211ECF = { # Arkham
			save_scope_as = university_state
		}
	}	
	
	option = { #"We must back this"
		name = nda_nen.13.a
		default_option = yes
		
		# enable decision 'tonic for the troops'
		set_global_variable = herbert_west_successful	


		debug_log = "Herbert West Successful"
	}
	option = { #"Is it too late to stop him?"
		name = nda_nen.13.b
		default_option = yes

		# Do nothing
		debug_log = "Herbert West Stopped"
	}

}


#94143 - Disappearence of Dr West
nda_nen.14 = { # Disappearence of Dr West
	type = country_event
	placement = scope:university_state
	title = nda_nen.14.t
	desc = nda_nen.14.d
	flavor =  nda_nen.14.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_vandalized_storefront.bk2"
		
	}
	#event_image = {  texture = "gfx/event_pictures/event1.dds"  }

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	trigger = {
		game_date >= 1920  # 
		owns_entire_state_region = STATE_MASSACHUSETTS
		exists = c:NEN
		c:NEN = ROOT
		NOT = { has_global_variable = herbert_west_end }
	}

	immediate = {
		random_scope_state = {
			limit = {
				state_region = s:STATE_MASSACHUSETTS
				owner = ROOT
			}
			save_scope_as = university_state
		}
		set_global_variable = herbert_west_end	
	}	
	
	option = { #" A tragic event"
		name = nda_nen.14.a
		default_option = yes

		debug_log = "Herbert West End"
	}

}