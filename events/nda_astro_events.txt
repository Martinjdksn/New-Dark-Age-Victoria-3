namespace = nda_astro
# Conjunctions and Stars are Right events - acts as forewarning or drivers for other effects
# these are firing at multiple times - once for each contry - need them to fire at same time as fixed event.

nda_astro.10 = { # 1842 conjunction
	type = country_event
	hidden = yes
	
	trigger = { 
		NOT = { has_global_variable = nda_conjunction_1 }		
		game_date >= 1842.1.25	#1836.2.15 #

		# should fire once for first country to get it
		#game_date < 1843 # stop late forming countries getting event	
		# for everyone?	
		#OR = {
		#	#is player or open cultist
		#	is_player = yes
		#	has_variable = nda_cultists_in_open
		#}	
	}

	immediate = {
		every_country = {
			limit = {
				OR = {
					#is player or open cultist
					is_player = yes
					has_variable = nda_cultists_in_open
				}				
			}

			trigger_event = { id = nda_astro.1 }	# fire main events		
		}		
		set_global_variable = nda_conjunction_1
		debug_log = "Conjunction 1 Lead Fire"
	}	
}

nda_astro.1 = { # 1842 conjunction
	type = country_event
	placement = ROOT
	title = nda_astro.1.t
	desc = nda_astro.1.d
	flavor =  nda_astro.1.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	immediate = {
		set_variable = nda_conjunction_1
		debug_log = "Conjunction 1"
	}	
	
	option = { #"A bit worrying..." # Nothing you can do
		name = nda_astro.1.a 
		default_option = yes
	}
}

nda_astro.2 = { # 1861 conjunction
	type = country_event
	placement = ROOT
	title = nda_astro.2.t
	desc = nda_astro.2.d
	flavor =  nda_astro.2.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	trigger = { 	
		NOT = { has_variable = nda_conjunction_2 }		
		game_date >= 1861.10.25		
		game_date < 1862 # stop late forming countries getting event	
	}

	immediate = {
		set_variable = nda_conjunction_2
		debug_log = "Conjunction 2"
		nda_effect_rite_conversion = yes

		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_yigian = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_dagonic = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
	}	
			
	option = { #"A bit worrying..." # Nothing you can do
		name = nda_astro.2.a
		default_option = yes
		trigger = { has_variable = nda_cultists_in_open }		
	}

	option = { #"Hurrah!!!" # Nothing you can do
		name = nda_astro.2.b
		#default_option = yes
		trigger = { NOT = { has_variable = nda_cultists_in_open } }
	}
}

nda_astro.3 = { # 1881 conjunction
	type = country_event
	placement = ROOT
	title = nda_astro.3.t
	desc = nda_astro.3.d
	flavor =  nda_astro.3.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	trigger = { 		
		NOT = { has_variable = nda_conjunction_3 }	
		game_date >= 1881.4.22		
		game_date < 1882 # stop late forming countries getting event	
	}

	immediate = {
		set_variable = nda_conjunction_3
		debug_log = "Conjunction 3"
		nda_effect_rite_conversion = yes

		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_yigian = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_dagonic = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
	}	
			
	option = { #"A bit worrying..." # Nothing you can do
		name = nda_astro.3.a
		default_option = yes
		trigger = { has_variable = nda_cultists_in_open }		
	}

	option = { #"Hurrah!!!" # Nothing you can do
		name = nda_astro.3.b
		#default_option = yes
		trigger = { NOT = { has_variable = nda_cultists_in_open } }
	}
}

nda_astro.4 = { # 1901 conjunction
	type = country_event
	placement = ROOT
	title = nda_astro.4.t
	desc = nda_astro.4.d
	flavor =  nda_astro.4.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	trigger = { 
		NOT = { has_variable = nda_conjunction_4 }			
		game_date >= 1901.11.28		
		game_date < 1902 # stop late forming countries getting event
	}

	immediate = {
		set_variable = nda_conjunction_4
		debug_log = "Conjunction 4"
		nda_effect_rite_conversion = yes

		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_yigian = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
		random_country = {
			limit = {
				#country_rank >= rank_value:unrecognized_regional_power	

				NOT = { has_variable = nda_nameless_cults_selected }
				any_scope_state = { 
					is_potentially_dagonic = yes
				}
			}

			set_variable = nda_nameless_cults_selected
		}
	}	
			
	option = { #"A bit worrying..." # Nothing you can do
		name = nda_astro.4.a
		default_option = yes
		trigger = { has_variable = nda_cultists_in_open }		
	}

	option = { #"Hurrah!!!" # Nothing you can do
		name = nda_astro.4.b
		#default_option = yes
		trigger = { NOT = { has_variable = nda_cultists_in_open } }
	}
}

nda_astro.5 = { # 1921 conjunction
	type = country_event
	placement = ROOT
	title = nda_astro.5.t
	desc = nda_astro.5.d
	flavor =  nda_astro.5.f

	duration = 3

	event_image = {
		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
	}

	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"

	icon = "gfx/interface/icons/event_icons/event_skull.dds"
	
	trigger = { 	
		NOT = { has_variable = nda_conjunction_5 }		
		NOT = { has_global_variable = nda_ritual_cthulhu_leaves	} # They've gone so no Cult rational	
		game_date >= 1921.9.14	
		game_date < 1922 # stop late forming countries getting event	
	}

	immediate = {
		set_variable = nda_conjunction_5
		debug_log = "Conjunction 5"
		nda_effect_rite_conversion = yes
	}	
			
	option = { #"A bit worrying..." # Nothing you can do
		name = nda_astro.5.a
		default_option = yes
		trigger = { has_variable = nda_cultists_in_open }		
	}

	option = { #"Hurrah!!!" # Nothing you can do
		name = nda_astro.5.b
		#default_option = yes
		trigger = { NOT = { has_variable = nda_cultists_in_open } }
	}
}

#nda_astro.6 = { # TEST EVENT 
#	type = country_event
#	placement = ROOT
#	title = nda_astro.5.t
#	desc = nda_astro.5.d
#	flavor =  nda_astro.5.f
#
#	duration = 3
#
#	event_image = {
#		video = "gfx/event_pictures/unspecific_ruler_speaking_to_people.bk2"	
#	}
#
#	on_created_soundeffect = "event:/SFX/UI/Alerts/event_appear"
#	on_opened_soundeffect = "event:/SFX/Events/southamerica/war_civilians"
#
#	icon = "gfx/interface/icons/event_icons/event_skull.dds"
#	
#	trigger = { 	
#		#NOT = { has_variable = nda_conjunction_5 }		
#		#game_date >= 1921.9.14	
#		#game_date < 1922 # stop late forming countries getting event	
#	}
#
#	immediate = {
#		set_variable = nda_conjunction_5
#		debug_log = "Test Event Log 1"
#		debug_log = "Test Event Log 2 : [Scope.c:GetName]"
#	}	
#			
#	option = { #"A bit worrying..." # Nothing you can do
#		name = nda_astro.5.a
#		default_option = yes		
#	}
#}
