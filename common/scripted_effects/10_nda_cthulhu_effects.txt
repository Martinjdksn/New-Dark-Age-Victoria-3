nda_effect_cthulhu_arrives = { # Used at end of Ritual
	# everywhere
	every_country = {
		every_scope_state = {
			state_region = { # will this double up on shared regions? Was a bit lame at 30 dev 10 pol,
				# Cause devestation
				add_devastation = 80
				# and polution
				add_pollution = 40				
			}
			add_modifier = {
				name = nda_dark_skies_modifier
			}

		}
		# don't need to add for country
		#add_modifier = {
		#	name = nda_dark_skies_modifier # cloudly skies cause crop fail
		#}	

		if = { # cultists outside cult country
			limit = {
				NOT = {
					is_full_cult_country = { COUNTRY="THIS" }				
				}
			}

			every_scope_culture = {
				if = {
					limit = {
						NOT = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make cultists outside cult lands angry
					ROOT = {
						add_radicals = {
							value = 0.5
							culture = THIS
						}						
					}				
				}
			}
		}

		if = { # cultists in cult country
			limit = {
					is_full_cult_country = { COUNTRY="THIS" }				
			}

			every_scope_culture = {
				if = {
					limit = {
						OR = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make cultists in cult lands happy!
					ROOT = {
						add_loyalists = {
							value = 0.5
							culture = THIS
						}
					}				
				}
			}
		}
	}		
}

nda_effect_cthulhu_leaves = { # Used at departure
	# everywhere
	every_country = {
		every_scope_state = {
			state_region = { # will this double up on shared regions? Was a bit lame at 30 dev 10 pol,
				# Cause devestation
				add_devastation = 70
				# and polution
				add_pollution = 30				
			}
			remove_modifier = nda_dark_skies_modifier # skies clear	
		}
		remove_modifier = nda_dark_skies_modifier		

		save_scope_as =  target_scope

		if = {
			limit = {
				is_full_cult_country = { COUNTRY="THIS" }					
			}

			every_scope_culture = {
				if = {
					limit = {
						NOT = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make non-cultist survivors angry
					scope:target_scope = {
						add_loyalists = {
							value = -0.5
							culture = THIS
						}
						add_radicals = {
							value = 0.5
							culture = THIS
						}					
					}				
				}
				if = {
					limit = {
						OR = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make cultists unhappy
					scope:target_scope = {
						add_radicals = {
							value =  very_large_radicals
							culture = THIS
						}						
					}				
				}
			}
		}
		else_if = {
			limit = {
				has_variable = nda_cultists_in_open					
			}

			every_scope_culture = {
				if = {
					limit = {
						NOT = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make non-cultist survivors angry
					scope:target_scope = {
						add_radicals = {
							value = 0.5
							culture = THIS
						}					
					}				
				}
				if = {
					limit = {
						OR = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make cultists unhappy
					scope:target_scope = {
						add_radicals = {
							value =  very_large_radicals
							culture = THIS
						}						
					}				
				}
			}

			# remove any cultist homelands and claims
			every_state_region = { # get claim on neighbours
				limit = { 
					is_homeland = cu:nda_cul_cultist			
				}
				remove_homeland = nda_cul_cultist						
			}

			# decrease relations with cult countries
			if = {
				limit = { exists = c:ELD}
				change_relations = { country = c:ELD value = -100 }
			}
			if = {
				limit = { exists = c:YIG}
				change_relations = { country = c:YIG value = -100 }
			}
			if = {
				limit = { exists = c:DAG}
				change_relations = { country = c:DAG value = -100 }
			}
		}
		else = { # not cultists  - make happier
			every_scope_culture = {
				if = {
					limit = {
						NOT = {
							THIS = cu:nda_cul_cultist
							THIS = cu:nda_cul_yigian
							THIS = cu:nda_cul_dagonic
						}
					}
					# Make non-cultist survivors happy
					scope:target_scope = {
						add_radicals = {
							value = -0.5
							culture = THIS
						}	
						add_loyalists = {
							value = 0.5
							culture = THIS
						}				
					}				
				}					
			}

			# decrease relations with cult countries
			if = {
				limit = { exists = c:ELD }
				change_relations = { country = c:ELD value = -100 }
			}
			if = {
				limit = { exists = c:YIG }
				change_relations = { country = c:YIG value = -100 }
			}
			if = {
				limit = { exists = c:DAG }
				change_relations = { country = c:DAG value = -100 }
			}

			# remove any cultist homelands and claims
			every_state_region = { # get claim on neighbours
				limit = { 
					is_homeland = cu:nda_cul_cultist			
				}
				remove_homeland = nda_cul_cultist						
			}
		}	

		# remove 'sercret masters' as not apprpriate
		ig:ig_nda_cult_worshippers = {
			# remove any secret masters modifier
			remove_modifier = nda_ig_secret_masters_modifier
		}		
	}		
}