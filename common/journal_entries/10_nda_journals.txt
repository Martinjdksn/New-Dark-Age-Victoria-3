je_nda_cult_spreads = {
	icon = "gfx/interface/icons/event_icons/event_industry.dds"

#	is_shown_when_inactive = {
#		
#	}

#	possible = {
#		
#	}

	immediate = {
		set_variable = {
				name = nda_cult_spread_tracker
				value = 1
			}
		clamp_variable = {
				name = nda_cult_spread_tracker
				min = 0
				max = 1000			
		}	
		save_scope_as = nda_je_scope
		debug_log = "Cult Spread Journal : Started : "
	}

    complete = {
		custom_tooltip = {
			text = je_nda_cult_spread_complete_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}

		# Should also be head of government ?? All member IG's ?
		custom_tooltip = {
			text = je_nda_cult_spread_hasleader_complete_tt

			OR = {
				any_interest_group = {	
					leader = { 
						has_eldritch_trait = yes
					}
					is_in_government = yes	
					is_powerful = yes			
				}	
				any_scope_character = {
					is_ruler = yes
					has_eldritch_trait = yes
				}			
			}

		}
    }

	on_complete = {
		debug_log =  "Cult Spread Journal : Completed :"
		trigger_event = { id = nda_base.7 }		
	}

	on_monthly_pulse = {
	
		# check count of cultists in government. add to counter
		effect = {
			# use ban on 'nameless Cults' to throtle back
			IF = {
				limit = { has_variable = nda_nameless_cults_supressed}
				scope:nda_je_scope = {
					change_variable = {
						name = nda_cult_spread_tracker
						add = -1
					}					
				}					
			}
			# Every non marginal 
			every_interest_group = {
				limit = { 
					is_marginal = no 
					leader = { 
						has_eldritch_trait = yes
					}
				}
				scope:nda_je_scope = {
					change_variable = {
						name = nda_cult_spread_tracker
						add = 1
					}					
				}				
			}	

			# Extra if in government
			every_interest_group = {
				limit = { 
					is_in_government = yes
					leader = { 
						has_eldritch_trait = yes
					}
				}
				scope:nda_je_scope = {
					change_variable = {
						name = nda_cult_spread_tracker
						add = 1
					}					
				}				
			}	

			# Extra if powerful
			every_interest_group = {
				limit = { 
					is_powerful = yes
					leader = { 
						has_eldritch_trait = yes
					}
				}
				scope:nda_je_scope = {
					change_variable = {
						name = nda_cult_spread_tracker
						add = 1
					}					
				}				
			}				
		}	

		# Chance that another character will become cultist
		random_events = { # adjust randomness based upon desired speed? Not sure how if 'IF' not working
			9 = 0
			1 = nda_base.6 
		}		
	}

	current_value = {
		value = root.var:nda_cult_spread_tracker
	}

	goal_add_value = {
		add = 900 # should be approx 10years -> 12 months x 8 IG + power and govern bonus?
	}

    fail = {
		# if ritual failed or star alignment occured
    }
	
	on_fail = {
		# celebratory event?
	}

	progressbar = yes
	weight = 100

	inheritable = yes

	should_be_pinned_by_default = yes
}

# Eldritch conversion to Yigian
je_nda_cult_to_yigian = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	is_shown_when_inactive = {
		country_has_primary_culture = cu:nda_cul_cultist 
	}

	possible = {
	#	# ? has any state as Eldritch homeland - will convert to Yigian on completion

		country_has_primary_culture = cu:nda_cul_cultist # easy check

		any_scope_state = { # has capital in americas
			is_potentially_yigian = yes
		}
	}

	immediate = {
		set_variable = {
				name = nda_cult_to_yigian_tracker
				value = 1
			}
		clamp_variable = {
				name = nda_cult_to_yigian_tracker
				min = 0
				max = 500			
		}	
		save_scope_as = nda_je_cult_to_yigian_scope
		debug_log = "Yigian Spread Journal : Started : "
	}

    complete = {
		custom_tooltip = {
			text = je_nda_cult_to_yigian_complete_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}

		# Should also be head of government ?? All member IG's ?
		custom_tooltip = {
			text = je_nda_cult_to_yigian_hasleader_complete_tt

			OR = {
				any_interest_group = {	
					leader = { 
						has_yigian_trait =yes
					}
					is_in_government = yes	
					is_powerful = yes			
				}
				any_scope_character = {
						is_ruler = yes
						has_yigian_trait = yes
				}					
			}
		}
    }

	on_complete = {
		debug_log =  "Yigian Spread Journal : Completed :"
		trigger_event = { id = nda_yigian.2 }		
	}

	on_monthly_pulse = {
	
		# check count of yigians in government. add to counter
		effect = {
			scope:nda_je_cult_to_yigian_scope = {
				change_variable = {
					name = nda_cult_to_yigian_tracker
					add = 1
				}					
			}

			# Every non marginal 
			every_interest_group = {
				limit = { 
					is_marginal = no 
					leader = { 
						has_yigian_trait = yes
					}
				}
				scope:nda_je_cult_to_yigian_scope = {
					change_variable = {
						name = nda_cult_to_yigian_tracker
						add = 1
					}					
				}				
			}	
			
			# Extra if in government
			every_interest_group = {
				limit = { 
					is_in_government = yes
					leader = { 
						has_yigian_trait = yes
					}
				}
				scope:nda_je_cult_to_yigian_scope = {
					change_variable = {
						name = nda_cult_to_yigian_tracker
						add = 1
					}					
				}				
			}	

			# Extra if powerful
			every_interest_group = {
				limit = { 
					is_powerful = yes
					leader = { 
						has_yigian_trait = yes
					}
				}
				scope:nda_je_cult_to_yigian_scope = {
					change_variable = {
						name = nda_cult_to_yigian_tracker
						add = 1
					}					
				}				
			}		
		}	

		# Chance that another character will become cultist
		random_events = { # adjust randomness based upon desired speed? Not sure how if 'IF' not working
			8 = 0
			1 = nda_yigian.1 
			1 = nda_base.6 # nned to keep adding base cultists as a number can disappear before conversion
		}		
	}

	current_value = {
		value = root.var:nda_cult_to_yigian_tracker
	}

	goal_add_value = {
		add = 300 # should be quicker than cultist as is just conversion?
	}

    fail = {
		# if ritual failed or star alignment occured
    }
	
	on_fail = {
		# celebratory event?
	}

	progressbar = yes
	weight = 200

	#inheritable = yes

	should_be_pinned_by_default = yes
}

# Eldritch conversion to Dagonic
je_nda_cult_to_dagonic = {
	icon = "gfx/interface/icons/event_icons/event_skull.dds"

	is_shown_when_inactive = {
		country_has_primary_culture = cu:nda_cul_cultist 
	}

	possible = {
	#	# ? has any state as Eldritch homeland - will convert to dagonic on completion

		country_has_primary_culture = cu:nda_cul_cultist # easy check
		#c:BRZ = ROOT

		any_scope_state = { # has capital in coastal asia/pacific
			is_potentially_dagonic = yes
		}
	}

	immediate = {
		set_variable = {
				name = nda_cult_to_dagonic_tracker
				value = 1
			}
		clamp_variable = {
				name = nda_cult_to_dagonic_tracker
				min = 0
				max = 500			
		}	
		save_scope_as = nda_je_cult_to_dagonic_scope
		debug_log = "dagonic Spread Journal : Started : "
	}

    complete = {
		custom_tooltip = {
			text = je_nda_cult_to_dagonic_complete_tt
			scope:journal_entry = {
				is_goal_complete = yes
			}
		}

		# Should also be head of government ?? All member IG's ?
		custom_tooltip = {
			text = je_nda_cult_to_dagonic_hasleader_complete_tt

			OR = {
				any_interest_group = {	
					leader = { 
						has_dagonic_trait =yes
					}
					is_in_government = yes	
					is_powerful = yes			
				}
				any_scope_character = {
						is_ruler = yes
						has_dagonic_trait = yes
				}
			}	
		}
    }

	on_complete = {
		debug_log =  "dagonic Spread Journal : Completed :"
		trigger_event = { id = nda_dagonic.2 }		
	}

	on_monthly_pulse = {
	
		# check count of dagonics in government. add to counter
		effect = {
				scope:nda_je_cult_to_dagonic_scope = {
					change_variable = {
						name = nda_cult_to_dagonic_tracker
						add = 1
					}					
				}


			# Every non marginal 
			every_interest_group = {
				limit = { 
					is_marginal = no 
					leader = { 
						has_dagonic_trait = yes
					}
				}
				scope:nda_je_cult_to_dagonic_scope = {
					change_variable = {
						name = nda_cult_to_dagonic_tracker
						add = 1
					}					
				}				
			}	
						
			# Extra if in government
			every_interest_group = {
				limit = { 
					is_in_government = yes
					leader = { 
						has_dagonic_trait = yes
					}
				}
				scope:nda_je_cult_to_dagonic_scope = {
					change_variable = {
						name = nda_cult_to_dagonic_tracker
						add = 1
					}					
				}				
			}	

			# Extra if powerful
			every_interest_group = {
				limit = { 
					is_powerful = yes
					leader = { 
						has_dagonic_trait = yes
					}
				}
				scope:nda_je_cult_to_dagonic_scope = {
					change_variable = {
						name = nda_cult_to_dagonic_tracker
						add = 1
					}					
				}				
			}		
		}	

		# Chance that another character will become cultist
		random_events = { # adjust randomness based upon desired speed? Not sure how if 'IF' not working
			8 = 0
			1 = nda_dagonic.1 
			1 = nda_base.6 # nned to keep adding base cultists as a number can disappear before conversion
		}		
	}

	current_value = {
		value = root.var:nda_cult_to_dagonic_tracker
	}

	goal_add_value = {
		add = 300 # should be quicker than cultist as is just conversion?
	}

    fail = {
		# if ritual failed or star alignment occured
    }
	
	on_fail = {
		# celebratory event?
	}

	progressbar = yes
	weight = 200

	#inheritable = yes

	should_be_pinned_by_default = yes
}