# For custom on_actions launched by the code itself.

# Root = Country
on_monthly_pulse_country = {
	events = {
		nda_base.2 # Nameless Cults
		nda_base.3 # Imprint of Nameless Cults	
		nda_base.5 # First Cultist

		nda_astro.1 
		nda_astro.2 
		nda_astro.3 
		nda_astro.4 
		nda_astro.5  
		
	}
	random_events = {
		
	}
}

on_half_yearly_pulse_country = {
	events = {
		nda_base.4 # Death of Junzt (Nameless Cults)
	}
}

on_election_campaign_start = {
	events = {

	}
}
on_election_campaign_end = { 
	events = {

	}
}

on_five_year_pulse_country = {
	events = {

	}
}

# assign Cultists to all leaders of that culture
on_character_creation = {
	effect = {
		if = {
			limit = {
				has_culture = cu:nda_cul_cultist
			}
			add_trait = nda_cultist
			change_character_religion = rel:nda_rel_cultist
		}
		# same for the yigians
		if = {
			limit = {
				has_culture = cu:nda_cul_yigian
			}
			add_trait = nda_yig_cultist
			change_character_religion = rel:nda_rel_yigian
		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_independent = {
	effect = {
		debug_log = "released_as_independent"	

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}
				debug_log = "ELD : released_as_independent"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_own_subject = {
	effect = {
		debug_log = "released_as_own_subject"

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}

				debug_log = "ELD : released_as_own_subject"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_overlord_subject = {
	effect = {

		debug_log = "released_as_overlord_subject"

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}
				debug_log = "ELD : released_as_overlord_subject"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}
