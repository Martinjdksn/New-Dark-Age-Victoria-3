# For custom on_actions launched by the code itself.

# Root = Country
on_monthly_pulse_country = {
	events = {
		nda_base.2 # Nameless Cults
		nda_base.3 # Imprint of Nameless Cults	
		nda_base.5 # First Cultist

		nda_base.10 # Eldritch Realms Proclaimed
		nda_base.11 # Eldritch War Buff

		nda_astro.10 
		nda_astro.2 
		nda_astro.3 
		nda_astro.4 
		nda_astro.5  
		
		nda_ritual.1 
		nda_ritual.2 
		nda_ritual.5 # Eldritch add Cult countries
		nda_ritual.6 # Eldritch lose non-Cult countries

		nda_yigian.3 # Yigian Lands Proclaimed
		
		nda_nen.10
		nda_nen.11 

		nda_whh.10 # House on the Borderlands
		nda_whh.11 # Carnacki Start
		nda_whh.12 # Carnacki Exile
		nda_whh.13 # Electric Pentangle

		nda_historic.10
		nda_historic.11
		nda_historic.12
		nda_historic.13
		nda_historic.14
		nda_historic.15
		nda_historic.16
	}
	random_events = {
		
	}
}

on_half_yearly_pulse_country = {
	events = {
		nda_base.4 # Death of Junzt (Nameless Cults)
		nda_base.9 # Cult Ideology Clean
	}
}

on_election_campaign_start = {
	events = {

	}
}
on_election_campaign_end = { 
	events = {

	}
}

on_five_year_pulse_country = {
	events = {

	}
}

# assign Cultists to all leaders of that culture
on_character_creation = {
	effect = {
		if = {
			limit = {
				has_culture = cu:nda_cul_cultist
			}
			add_trait = nda_cultist
			change_character_religion = rel:nda_rel_cultist
		}
		# same for the yigians
		if = {
			limit = {
				has_culture = cu:nda_cul_yigian
			}
			add_trait = nda_yig_cultist
			change_character_religion = rel:nda_rel_yigian
		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_independent = {
	effect = {
		debug_log = "released_as_independent"	

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}
				debug_log = "ELD : released_as_independent"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_own_subject = {
	effect = {
		debug_log = "released_as_own_subject"

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}

				debug_log = "ELD : released_as_own_subject"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}

# Root = Releasing Country
# scope:target = Released Country
on_country_released_as_overlord_subject = {
	effect = {

		debug_log = "released_as_overlord_subject"

		scope:target = {

			if = {
				limit = {
					exists = c:ELD
					c:ELD = scope:target
				}
				debug_log = "ELD : released_as_overlord_subject"

			}
			if = {
				limit = {
					country_has_state_religion = rel:nda_rel_cultist
				}

			}

		}
	}
}

## Root = Diplomatic Play
#on_diplo_play_war_start = {
#	effect = {
		# Always buff ELD if participating

		#every_scope_play_involved = {

		#	limit = { THIS = c:ELD  } 

		#	ROOT = { 

		#		debug_log = "ELD : on_diplo_play_war_start add_war_war_support 0 "

		#		add_diplomatic_play_war_support = { # had diplmatic stage ended or too late to effect ??
		#			target = c:ELD
		#			value = 15	
		#		}

		#		#add_war_war_support = { # has war actually started??  Error: add_war_war_support effect [ Wrong scope for effect: diplomatic_play, expected war ]
		#		#	target = c:ELD
		#		#	value = 10
		#		#}

		#		#add_variable = nda_buff_ELD

		#		debug_log = "ELD : on_diplo_play_war_start add_war_war_support 1 "
		#	}

		#	debug_log = "ELD : on_diplo_play_war_start add_war_war_support 2"
		#}


	#	post_notification = diplo_play_war_start_notification
	#	post_notification = diplo_play_war_start_third_party_notification
#	}
#}